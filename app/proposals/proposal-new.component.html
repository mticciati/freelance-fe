<div class="container">
  <div class="row">
    <div class="col-xs-10 offset-1">
      <h1 class="headline">Create a Proposal</h1>
    </div>
  </div>
  <div class="card">
    <div class="row form-container">
      <div class="col-xs-10 offset-xs-0 col-md-5 offset-md-1">
        

        <div>
          <form (ngSubmit)="createProposal(proposal)" #proposalForm="ngForm">
            <div class="form-group">
              <label for="customer">Customer Name</label>
              <input type="text"
                      id="customer"
                      class="form-control" 
                      required
                      name="customer" 
                      placeholder="ABC Company"
                      #customer='ngModel'
                      [(ngModel)]="proposal.customer"
              />
            </div>

            <div [hidden]="customer.valid || customer.pristine"
                  class="alert alert-danger"
            >
            Customer name is required
            </div>
            
            <div class="form-group">
              <label for="portfolio_url">Portfolio URL</label>
              <input type="text"
                      id="portfolio_url" 
                      class="form-control"
                      required
                      name="portfolio_url" 
                      #portfolio_url='ngModel'
                      [(ngModel)]="proposal.portfolio_url"
              />
            </div>

            <div [hidden]="portfolio_url.valid || portfolio_url.pristine"
                  class="alert alert-danger"
            >
            Portfolio Url is required
            </div>

            <div class="form-group">
              <label for="tools">Tools</label>
              <input type="text"
                      id="tools" 
                      class="form-control"
                      required
                      name="tools" 
                      placeholder="Ruby on Rails"
                      #tools='ngModel'
                      [(ngModel)]="proposal.tools"
              />
            </div>

            <div [hidden]="tools.valid || tools.pristine"
                  class="alert alert-danger"
            >
            A list of tools is required
            </div>

            <div class="form-group">
              <label for="estimated_hours">Estimated Hours</label>
              <input type="number"
                      id="estimated_hours"
                      class="form-control" 
                      required
                      name="estimated_hours" 
                      placeholder="80"
                      #estimated_hours='ngModel'
                      [(ngModel)]="proposal.estimated_hours"
              />
            </div>

            <div [hidden]="estimated_hours.valid || estimated_hours.pristine"
                  class="alert alert-danger"
            >
            You need to enter estimated hours for the project
            </div>

            <div class="form-group">
              <label for="hourly_rate">Hourly Rate</label>
              <div class="input-group">
                <span class="input-group-addon">$</span>
              
                <input type="number"
                        id="hourly_rate" 
                        class="form-control"
                        required
                        name="hourly_rate" 
                        placeholder="120"
                        #hourly_rate='ngModel'
                        [(ngModel)]="proposal.hourly_rate"
                />
              </div>
            </div>

            <div [hidden]="hourly_rate.valid || hourly_rate.pristine"
                  class="alert alert-danger"
            >
            You need to specify your hourly rate
            </div>

            <div class="form-group">
              <label for="weeks_to_complete">Weeks to Complete</label>
              <input type="number"
                      id="weeks_to_complete" 
                      class="form-control"
                      required
                      name="weeks_to_complete" 
                      placeholder="10"
                      #weeks_to_complete='ngModel'
                      [(ngModel)]="proposal.weeks_to_complete"
              />
            </div>

            <div [hidden]="weeks_to_complete.valid || weeks_to_complete.pristine"
                  class="alert alert-danger"
            >
            You need enter the weeks you estimate it will take to complete the project
            </div>

            <div class="form-group">
              <label for="client_email">Client Email <em>(Optional)</em></label>
              <input type="email"
                      id="client_email" 
                      class="form-control"
                      name="client_email" 
                      placeholder="Client Email"
                      #client_email='ngModel'
                      [(ngModel)]="proposal.client_email"
              />
            </div>
              <button type="submit" 
              class="btn btn-outline-info btn-lg pointer"
              [disabled]="!proposalForm.form.valid"
              [hidden]="submitted"
            >
              Generate Proposal
            </button>

            <div 
              class="alert alert-success" 
              role="alert"
              [hidden]="!submitted">
              Your proposal has been generated <a class="alert-link" routerLink="/proposals">View all proposals</a>
            </div>

          </form>
        </div>
      </div>

      <div class="col-xs-10 col-xs-offset-0 col-md-5 col-md-offset-1">
        <div>
          <p>Hi {{ proposal.customer }},</p>


          <p>It was a pleasure getting to meet with you and review your project requirements, I believe it is a great fit for the types of applications that I build out. Please feel free to check out some of my past projects <a href="{{ proposal.portfolio_url }}" title="{{ proposal.portfolio_url }}">here</a>.</p>


          <p>To successfully build out the application I will be utilizing {{ proposal.tools }}, and a number of other tools to ensure that the project follows industry wide best practices.</p>


          <p>Ensuring that you are fully informed is one of my top priorities, so in addition to incorporating everything that we discussed, I will also be creating a project management dashboard and sending you a project update message daily so that you can have a transparent view of the development as it takes place.</p>


          <p>To accomplish the project and meet the requirements that we discussed, I am estimating that it will take {{ proposal.estimated_hours }} hours in development time to complete. The project should take {{ proposal.weeks_to_complete }} weeks to complete and with my hourly rate of {{ proposal.hourly_rate }}/hour, the estimated total will be {{ proposal.hourly_rate * proposal.estimated_hours | currency:'USD':true:'.0' }}.</p>


          <p>The next step from here is to set up a meeting to finalize the project and sign contracts.</p>


          <p>I am excited to working with you and build out this project.</p>
        </div>
      </div>

    </div>
      
  </div>

</div>
